# Mailwarden Configuration Example
# Copy this file to config.yml and customize for your environment

# ============================================
# IMAP Server Settings
# ============================================
imap:
  # IMAP server hostname or IP address
  host: mail.example.com
  
  # IMAP port (993 is standard for IMAPS/TLS)
  port: 993
  
  # Your email address / IMAP username
  username: user@example.com
  
  # IMAP password
  password: your-imap-password
  
  # Use TLS encryption (STRONGLY RECOMMENDED)
  use_tls: true
  
  # Verify SSL certificates (RECOMMENDED for security)
  verify_ssl: true
  
  # Connection timeout in seconds
  timeout: 30
  
  # Folder to monitor for incoming mail
  inbox_folder: INBOX
  
  # Folder where spam/scam emails will be moved
  spam_folder: INBOX.Spam

# ============================================
# Ollama (Local AI) Settings
# ============================================
ollama:
  # Ollama API base URL
  base_url: http://localhost:11434
  
  # Model to use for spam classification
  # REQUIRED: gemma3:27b
  model: gemma3:27b
  
  # API timeout in seconds
  timeout: 60

# ============================================
# Logging Settings
# ============================================
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR
  level: INFO
  
  # Optional: Write logs to file
  # log_file: mailwarden.log
  
  # Optional: Write structured audit log (JSON lines)
  audit_file: audit.jsonl

# ============================================
# AI Escalation Rules
# ============================================
# Define when emails should be sent to AI for classification
# Email is escalated if ANY rule matches
escalation:
  enabled: true
  rules:
    # Rule 1: Bayes uncertainty (no training data)
    - name: "Bayes uncertainty"
      spam_tests:
        - BAYES_00
        - BAYES_50
    
    # Rule 2: Low score but HTML-only email
    - name: "Low score HTML only"
      max_score: 5.0
      spam_tests:
        - MIME_HTML_ONLY
    
    # Rule 3: Low score but HTTPS/HTTP mismatch
    - name: "Low score HTTPS mismatch"
      max_score: 5.0
      spam_tests:
        - HTTPS_HTTP_MISMATCH
    
    # Add more rules as needed...
    # Available fields:
    #   name: Descriptive name for logging
    #   spam_tests: List of SpamAssassin test names (any match)
    #   max_score: Maximum spam score (rule matches if score <= max_score)
    # 
    # Both conditions must be met if both are specified

# ============================================
# Execution Mode
# ============================================
# Dry-run mode: classify emails but don't move them
# Set to true for testing, false for production
dry_run: false
